<div class="posts-show">
<div class="post">
<p class="post-header">
  <span>
    <%= link_to(@post.user.profile) do %>
      <%= image_tag @post.user.profile.profile_photo('tac'), class: 'tac-image' %>
    <% end %>

    <%= link_to "#{@post.user.first_name}", @post.user.profile, class: "user-name" %>
  </span>

  <%= link_to distance_of_time_in_words(Time.now, @post.created_at)+ ' ago', @post, class: 'timestamp' %>
  <% if current_user.id == @post.user_id %>
    <span class="edit-delete-post">
      <%= link_to 'Edit Post', edit_post_path(@post) %>
      <%= link_to 'Delete', @post, method: :delete, data: {confirm: "Are you sure?"} %>
    </span>
  <% end %>
</p>


  <p class="post-content">
    <%= @post.content %><br/>
    <% if @post.image.exists? %>
      <%= image_tag @post.image.url(:medium) %>
    <% end %>
  </p>



  <br/>

  <% if @post.comments.count > 0 %>
  <div class="all-comments">
    <% @post.comments.each do |comment| %>
      <% user = User.find(comment.user_id) %>
      <%= link_to(user.profile) do %>
        <%= image_tag user.profile.profile_photo('tac'), class: 'tac-image comment-image' %>
      <% end %>

      <p class="comment">
        <span class="comment-content">
          <strong><%= link_to "#{user.first_name} #{user.last_name}", user.profile, class: "user-name" %></strong> <%= comment.content %>
        </span>
        <% if current_user.id == comment.user_id %>
          <span class="edit-delete-comment">
            <%= link_to 'Edit', edit_comment_path(comment) %>
            <%= link_to 'Delete', comment, method: :delete, data: {confirm: "Are you sure?"} %>
          </span>
        <% end %>
      </p>
    <% end %>
  </div>
  <% end %>

  <%= form_for(@comment) do |c| %>
    <%= link_to(current_user.profile) do %>
      <%= image_tag current_user.profile.profile_photo('tac'), class: 'tac-image new-comment-image' %>
    <% end %>

    <%= c.text_area :content, class: "comment-field", placeholder: "Write a comment...", rows: "1" %>
    <%= c.submit "Comment" %>
    <%= c.hidden_field :post_id, value: @post.id %>
  <% end %>

</div>
</div>
